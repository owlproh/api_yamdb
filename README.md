# Групповой проект студентов Яндекс.Практикум по курсу "API: интерфейс взаимодействия программ"

## Описание

Проект YaMDb собирает отзывы пользователей на произведения.
Произведения делятся на категории: "Категории", "Фильмы", "Музыка".
Список категорий (Category) может быть расширен администратором (например, можно добавить категорию "Артхаус").
  
### Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку

В каждой категории есть произведения: книги, фильмы или музыка. 
Например, в категории "Книги" могут быть произведения "Винни-Пух и все-все-все" и "Марсианские хроники", а в категории "Музыка" — песня "Давеча" группы "Насекомые" и вторая сюита Баха.
Произведению может быть присвоен жанр из списка предустановленных (например, "Сказка", "Рок" или "Артхаус").Новые жанры может создавать только администратор.

Благодарные или возмущённые пользователи оставляют к произведениям текстовые отзывы (Review) и ставят произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усреднённая оценка произведения — рейтинг (целое число). На одно произведение пользователь может оставить только один отзыв.

#### Доступный функционал

- Для аутентификации используются JWT-токены.
- У неаутентифицированных пользователей доступ к API только на уровне чтения.
- Создание объектов разрешено только аутентифицированным пользователям.На прочий фунционал наложено ограничение в виде административных ролей и авторства.
- Управление пользователями.
- Получение списка всех категорий и жанров, добавление и удаление.
- Получение списка всех произведений, их добавление.Получение, обновление и удаление конкретного произведения.
- Получение списка всех отзывов, их добавление.Получение, обновление и удаление конкретного отзыва.  
- Получение списка всех комментариев, их добавление.Получение, обновление и удаление конкретного комментария.
- Возможность получения подробной информации о себе и удаления своего аккаунта.
- Фильтрация по полям.

#### Документация

После запуска проекта (*см. ниже) по адресу [http://127.0.0.1:8000/redoc/](http://127.0.0.1:8000/redoc/) доступна документация к проекту.

#### Технологии 

- [Python 3.7+](https://www.python.org/)
- [Django 2.2.16](https://www.djangoproject.com)
- [Django Rest Framework 3.12.4](https://www.django-rest-framework.org)
- [Simple JWT](https://django-rest-framework-simplejwt.readthedocs.io/en/latest/)
- [SQLite3](https://www.sqlite.org/index.html)

#### Запуск проекта в dev-режиме

- Склонируйте репозиторий:
``` git clone <ссылка на репозиторий> ```
- Установите и активируйте виртуальное окружение:
``` py -m venv venv ```
``` source venv/Scripts/activate ```
- Обновите pip:
``` py -m pip install --upgrade pip ```
- Установите зависимости из файла requirements.txt:
``` pip install -r requirements.txt ```
- Перейдите в папку api_yamdb/api_yamdb.
- Примените миграции:
``` py manage.py migrate ```
- Загрузите тестовые данные:  
``` python manage.py load_data ```
- Выполните команду:
``` py manage.py runserver ```

#### Примеры некоторых запросов API
Регистрация пользователя:  
``` POST /api/v1/auth/signup/ ```  
Получение данных своей учетной записи:  
``` GET /api/v1/users/me/ ```  
Добавление новой категории:  
``` POST /api/v1/categories/ ```  
Получение списка всех отзывов:  
``` GET /api/v1/titles/{title_id}/reviews/ ```   
Добавление комментария к отзыву:  
``` POST /api/v1/titles/{title_id}/reviews/{review_id}/comments/ ```    

#### Примеры запросов JSON-формате:

Получение списка всех произведений:
```GET api/v1/titles/```
Ответ:
```
[
 {
   "count": 0,
   "next": "string",
   "previous": "string",
   "results": [
     {
       "id": 0,
       "name": "string",
       "year": 0,
       "rating": 0,
       "description": "string",
       "genre": [
         {
           "name": "string",
           "slug": "string"
         }
       ],
       "category": {
         "name": "string",
         "slug": "string"
       }
     }
   ]
 }
]
```

Опубликовать новый отзыв:
```POST api/v1/titles/{title_id}/reviews/```
Запрос:
```
{
"text": "string",
"score": 1
}
```
Ответ:
```
{
"id": 0,
"text": "string",
"author": "string",
"score": 1,
"pub_date": "2019-08-24T14:15:22Z"
}
```
Отредактировать комментарий к отзыву на произведение:
```PATCH api/v1/titles/{title_id}/reviews/{review_id}/comments/{comment_id}/```
Запрос:
```
{
 "text": "string"
}
```
Ответ:
```
{
 "id": 0,
 "text": "string",
 "author": "string",
 "pub_date": "2019-08-24T14:15:22Z"
}
```
Добавление новой категории:
```POST api/v1/categories/```
Запрос:
```
{
 "name": "string",
 "slug": "string"
}
```
Ответ:
```
{
"name": "string",
"slug": "string"
}
```

#### Полный список запросов API находятся в [документации](#документация)

#### Авторы
[Святослав](https://github.com/owlproh)

[Тимур](https://github.com/TimurMahmudov)

[Мария](https://github.com/maria-kat)